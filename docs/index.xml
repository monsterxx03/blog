<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Shining Moon</title>
    <link>https://blog.monsterxx03.com/</link>
    <description>Recent content on Shining Moon</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Fri, 01 Jun 2018 17:03:24 +0800</lastBuildDate>
    
	<atom:link href="https://blog.monsterxx03.com/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>åœ¨python3.7 ä¸­å®ç°python2.7 çš„å†…ç½® hash å‡½æ•°</title>
      <link>https://blog.monsterxx03.com/2018/06/01/%E5%9C%A8python3.7-%E4%B8%AD%E5%AE%9E%E7%8E%B0python2.7-%E7%9A%84%E5%86%85%E7%BD%AE-hash-%E5%87%BD%E6%95%B0/</link>
      <pubDate>Fri, 01 Jun 2018 17:03:24 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/06/01/%E5%9C%A8python3.7-%E4%B8%AD%E5%AE%9E%E7%8E%B0python2.7-%E7%9A%84%E5%86%85%E7%BD%AE-hash-%E5%87%BD%E6%95%B0/</guid>
      <description>æœ€è¿‘ç€æ‰‹å‡†å¤‡ä» python2.7 è¿ç§»åˆ° python3.7, è¿˜æ²¡å¼€å§‹å°±ç¢°åˆ°ä¸€ä¸ªé—®é¢˜. è€ç³»ç»Ÿé‡Œæœ‰ä¸€éƒ¨åˆ†ç«Ÿç„¶æ˜¯å°† python å†…ç½® hash å‡½æ•°çš„ç»“æœå­˜è¿›äº†æ•°æ®åº“, è¿™ä¸ªåšæ³•ç»å¯¹æ˜¯é”™çš„, hash çš„ç»“æœæœ¬æ¥å°±æ²¡æœ‰ä¿è¯è¿‡åœ¨å„ä¸ªç‰ˆæœ¬çš„ python ä¸­ä¿è¯ä¸€è‡´. è€Œä¸” python3 ä¸­ç®—æ³•å®Œå…¨å˜äº†, é»˜è®¤åœ¨è¿›ç¨‹åˆå§‹åŒ–çš„æ—¶å€™ä¼šç”¨éšæœºç§å­åŠ è¿› hash è¿‡ç¨‹, æ‰€ä»¥python è¿›ç¨‹ ä¸€é‡å¯ç»“æœå°±ä¸ä¸€æ ·äº†. æœ¨å·²æˆèˆŸï¼Œ ç›®å‰çœ‹å°†æ•°æ®åº“é‡Œçš„å€¼å…¨éƒ¨æ”¹æ‰æ˜¯ä¸å¯èƒ½äº†, åªèƒ½åœ¨ python3 ä¸­é‡æ–°å®ç°ä¸€ä¸‹è¿™ä¸ªç®—æ³•.
python2.7 ä¸­çš„hash ç®—æ³•æ˜¯ fnv (æœ‰ä¿®æ”¹), python3 ä¸­å˜æˆäº† sip, pep-456.
fnv çš„å®ç°å¾ˆç®€å•ï¼Œ å¼•ç”¨ wikipedia ä¸Šçš„ä¼ªä»£ç :
hash = FNV_offset_basis for each byte_of_data to be hashed hash = hash Ã— FNV_prime hash = hash XOR byte_of_data return hash  FNV_prime æ˜¯ 1000003, python å®ç°å’Œæ ‡å‡† fnv çš„ä¸åŒåœ¨äº, åœ¨è¿›å…¥å¾ªç¯ hash ä¹‹å‰å°†æ•°æ®å·¦ç§»äº†7ä½, åœ¨æœ€ååˆå’Œé•¿åº¦åšäº†æ¬¡XOR, ç”Ÿæˆçš„æ•°æ®éšæœºæ€§æ›´å¤§ä¸€ç‚¹.</description>
    </item>
    
    <item>
      <title>Use SNS &amp; SQS to build Pub/Sub System</title>
      <link>https://blog.monsterxx03.com/2018/05/23/use-sns--sqs-to-build-pub/sub-system/</link>
      <pubDate>Wed, 23 May 2018 18:05:28 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/05/23/use-sns--sqs-to-build-pub/sub-system/</guid>
      <description>Recently, we build pub/sub system based on AWS&amp;rsquo;s SNS &amp;amp; SQS service, take some notes.
Originally, we have an pub/sub system based on redis(use BLPOP to listen to a redis list). It&amp;rsquo;s really simple, and mainly for cross app operations. Now we have needs to enhance it to support more complex pubsub logic, eg: topic based distribution. It don&amp;rsquo;t support redelivery as well, if subscribers failed to process the message, message will be dropped.</description>
    </item>
    
    <item>
      <title>Migrate to Sqlalchemy</title>
      <link>https://blog.monsterxx03.com/2018/05/20/migrate-to-sqlalchemy/</link>
      <pubDate>Sun, 20 May 2018 15:11:31 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/05/20/migrate-to-sqlalchemy/</guid>
      <description>æœ€è¿‘æŠŠå…¬å¸ db å±‚çš„å°è£…ä»£ç åŸºäº sqlalchemy é‡å†™äº†, è®°å½•ä¸€äº›.
åŸæ¥çš„ db å±‚ä»£ç å†å²éå¸¸å¤è€(10å¹´ä»¥ä¸Š&amp;hellip;), æœ€æ—©å†™ä»£ç çš„äººæ—©å°±ä¸åœ¨äº†, é—®é¢˜å¾ˆå¤š:
 å®Œå…¨æ²¡æœ‰å•å…ƒæµ‹è¯•. æš´éœ²å‡ºçš„æ¥å£å‘½åå¾ˆæ··ä¹±, å¤šæ•°æ˜¯ä¸ºäº†å…¼å®¹ä¸€äº›å†å²é—®é¢˜. é‡Œé¢å¸¦ä¸€å¥— client ç«¯ db sharding çš„é€»è¾‘, ä½†åœ¨æ–°é¡¹ç›®é‡Œå®Œå…¨ç”¨ä¸åˆ°, è¿˜å¯¼è‡´æ— æ³•åš join, æ— æ³•å­æŸ¥è¯¢, å¾ˆä¸æ–¹ä¾¿. è€çš„ db ä»£ç æ²¡æœ‰ model å±‚, å’Œ db migration é€šè¿‡ä¸€ç§å¾ˆ trick çš„æ–¹å¼ç»‘å®šåœ¨ä¸€èµ·å®ç°çš„, å¯¼è‡´å¼€å‘æ—¶å€™å¯¹ç€ä»£ç å®Œå…¨æ— æ³•çŸ¥é“æ•°æ®åº“è¡¨ç»“æ„ï¼Œåªèƒ½ç›´æ¥çœ‹æ•°æ®åº“.  é‡å†™æ—¶å€™è¦è€ƒè™‘åˆ°çš„:
 ç°æœ‰ä¸šåŠ¡ä»£ç åŸºäºè€ db ä»£ç å·²ç»å†™äº†å¾ˆå¤šäº†, é‡å†™ä¸ç°å®, è¿ç§»åˆ° sqlalchemy éœ€è¦å°è£…ä¸€å¥—å®Œå…¨å…¼å®¹çš„ api, æ²¡ç”¨åˆ°çš„æ··ä¹±çš„è€ api è¶æœºæ¸…ç†. db migration éœ€è¦é‡æ–°å®ç°, åªç”¨ alembic ä¸èƒ½æ»¡è¶³éœ€æ±‚, åè¯¦. é‡å†™å®Œçš„ä»£ç ä¿è¯é«˜æµ‹è¯•è¦†ç›–ç‡.  ORM or Core sqlalchemy åˆ†æˆä¸¤éƒ¨åˆ†, åº•å±‚çš„ sqlalchemy core æ˜¯ä¸€å¥— sql è¯­æ³•ç”Ÿæˆå™¨, é€šè¿‡é‡è½½ python çš„ magic function å®ç°ç”¨æ¯”è¾ƒæ¼‚äº®çš„ python è¯­æ³•æ¥æ„é€  sql.</description>
    </item>
    
    <item>
      <title>AWS çš„ K8S CNI Plugin</title>
      <link>https://blog.monsterxx03.com/2018/04/09/aws-%E7%9A%84-k8s-cni-plugin/</link>
      <pubDate>Mon, 09 Apr 2018 15:28:38 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/04/09/aws-%E7%9A%84-k8s-cni-plugin/</guid>
      <description>EKS è¿˜æ²¡æœ‰ launch, ä½† AWS å…ˆå¼€æºäº†è‡ªå·±çš„ CNI æ’ä»¶, ç®€å•çœ‹äº†ä¸‹, è¯´è¯´å®ƒçš„å®ç°å’Œå…¶ä»– K8S ç½‘ç»œæ–¹æ¡ˆçš„å·®åˆ«.
K8S é›†ç¾¤å¯¹ç½‘ç»œæœ‰å‡ ä¸ªåŸºæœ¬è¦æ±‚:
 container ä¹‹é—´ç½‘ç»œå¿…é¡»å¯è¾¾ï¼Œä¸”ä¸é€šè¿‡ NAT æ‰€æœ‰ node å¿…é¡»å¯ä»¥å’Œæ‰€æœ‰ container é€šä¿¡, ä¸”ä¸é€šè¿‡ NAT container è‡ªå·±çœ‹åˆ°çš„ IP, å¿…é¡»å’Œå…¶ä»– container çœ‹åˆ°çš„å®ƒçš„ ip ç›¸åŒ.  Flannel in VPC flannel æ˜¯ K8S çš„ä¸€ä¸ª CNI æ’ä»¶, åœ¨ VPC é‡Œä½¿ç”¨ flannel çš„è¯, æœ‰å‡ ä¸ªé€‰æ‹©:
 é€šè¿‡ VXLAN/UDP è¿›è¡Œå°åŒ…, å°åŒ…å½±å“ç½‘ç»œæ€§èƒ½, è€Œä¸”ä¸å¥½ debug ç”¨ aws vpc backend, è¿™ç§æ–¹å¼ä¼šæŠŠæ¯å°ä¸»æœºçš„ docker ç½‘æ®µæ·»åŠ è¿› vpc routing table, ä½†é»˜è®¤ routing table é‡Œåªèƒ½æœ‰50æ¡è§„åˆ™, æ‰€ä»¥åªèƒ½ 50 ä¸ª node, å¯ä»¥å‘ ticket æå‡, ä½†æ•°é‡å¤ªå¤šä¼šå½±å“ vpc æ€§èƒ½.</description>
    </item>
    
    <item>
      <title>AWS lambda çš„ä¸€äº›åº”ç”¨åœºæ™¯</title>
      <link>https://blog.monsterxx03.com/2018/03/23/aws-lambda-%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/</link>
      <pubDate>Fri, 23 Mar 2018 17:40:54 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/03/23/aws-lambda-%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/</guid>
      <description>è¿™å‡ å¹´å¹ serverless çš„æ¯”è¾ƒå¤š, åœ¨å…¬å¸å†…éƒ¨ä¹Ÿç”¨ lambda , è®°å½•ä¸€ä¸‹, è¿™ä¸œè¥¿æŒºæœ‰ç”¨, ä½†è¿œä¸åˆ°ä¸‡èƒ½, åœºæ™¯æ¯”è¾ƒæœ‰é™.
lambda çš„ä»£ç çš„éƒ¨ç½²ç”¨çš„ serverless æ¡†æ¶, æœ¬èº«æ”¯æŒå¤šç§ cloud å¹³å°, æˆ‘ä»¬å°±åªåœ¨ aws lambda ä¸Šäº†.
æˆ‘åŸºæœ¬ä¸Šå°±æŠŠ lambda å½“æˆ trigger å’Œ web hook ç”¨.
å’Œ auto scaling group ä¸€èµ·ç”¨ çº¿ä¸Šæ‰€æœ‰åˆ†ç»„çš„æœºå™¨éƒ½æ˜¯ç”¨ auto scaling group ç®¡ç†çš„, åªä¸è¿‡ stateless çš„ server å¼€äº†è‡ªåŠ¨ä¼¸ç¼©, å¸¦çŠ¶æ€çš„ (ElasticSearch cluster, redis cache cluster) åªç”¨æ¥ç»´æŠ¤å›ºå®š size.
åœ¨å¾€ä¸€ä¸ª group é‡ŒåŠ  server çš„æ—¶å€™, è¦åšçš„äº‹æƒ…æŒºå¤šçš„, ç»™æ–° server æ·»åŠ ç»„å†…ç¼–å· tag, æ·»åŠ å†…ç½‘åŸŸå, provision, éƒ¨ç½²æœ€æ–°ä»£ç .
è¿™äº›äº‹éƒ½ç”¨ jenkins æ¥åš, ä½†æ€ä¹ˆè§¦å‘ jenkins job å‘¢?</description>
    </item>
    
    <item>
      <title>ä¸€æ¬¡å¤±è´¥çš„æ€§èƒ½é—®é¢˜æ’æŸ¥</title>
      <link>https://blog.monsterxx03.com/2018/03/17/%E4%B8%80%E6%AC%A1%E5%A4%B1%E8%B4%A5%E7%9A%84%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/</link>
      <pubDate>Sat, 17 Mar 2018 14:24:33 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/03/17/%E4%B8%80%E6%AC%A1%E5%A4%B1%E8%B4%A5%E7%9A%84%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/</guid>
      <description>ä¸€å¶éšœç›®, ä¸è§æ³°å±±. å‰é˜µå­ä¸€ç›´åœ¨æ’æŸ¥ä¸€ä¸ªæ€§èƒ½é—®é¢˜, ç»“æœç”±äºä¸€äº›æƒ¯æ€§æ€ç»´, è´¹äº†å¥½å¤§åŠ²æ‰å¼„æ˜ç™½åŸå› , è€Œä¸”åŸå› éå¸¸ç®€å•&amp;hellip;.æŠŠè¿™äº‹è®°å½•ä¸‹æ¥,å…å¾—ä»¥åå†æ‰å‘é‡Œå».
ç°è±¡æ˜¯åˆ°äº†æ™šä¸Š10ç‚¹å¤š, server lantency çªç„¶ä¸€ç¬é—´å˜é«˜, ä½†æŒç»­æ—¶é—´å¾ˆçŸ­ï¼Œé©¬ä¸Šå°±ä¼šæ¢å¤, timeout çš„è¯·æ±‚ä¹Ÿä¸å¤šï¼Œå½±å“ä¸å¤§.é—®é¢˜å…¶å®ä»è›®ä¹…å‰å°±å‡ºç°äº†, ä½†ä¸€ç›´ä¹Ÿæ²¡å¾ˆé‡è§†, å› ä¸ºæŒç»­æ—¶é—´çŸ­,å½±å“ä¹Ÿä¸å¤§,ç®€å•çœ‹äº†ä¸‹ä¹Ÿæ²¡çœ‹å‡ºæ˜æ˜¾çš„é—®é¢˜, å°±ä¸€ç›´æç½®ç€. ç›´åˆ°æœ€è¿‘ï¼Œè§‰å¾—é—®é¢˜å˜ä¸¥é‡äº†, latency å˜çš„æ›´é«˜äº†ï¼Œè€Œä¸”åœ¨10ï½11ç‚¹é—´å¤šæ¬¡å˜é«˜, å¼€å§‹è®¤çœŸçœ‹ä¸ºä»€ä¹ˆ.
ä»¥ä¸‹æ˜¯ debug è¿‡ç¨‹:
 æ—¶é—´æ®µéå¸¸å›ºå®šï¼Œæ¯å¤©çš„æ™šä¸Š10 ~ 11ç‚¹ä¹‹é—´, æ¯æ¬¡æŒç»­æ—¶é—´å¾ˆçŸ­, è§¦å‘æ—¶é—´ä¸æ˜¯å¾ˆæœ‰è§„å¾‹. æŸ¥çœ‹é‚£æ®µæ—¶é—´æ¯ä¸ª group çš„ load æƒ…å†µ, æœ‰å˜é«˜,ä½†ä¸æ˜æ˜¾. æŸ¥çœ‹ qps, å¹¶æ²¡æ˜¾è‘—å˜åŒ–. æŸ¥çœ‹ qps * avg_latency, å¯ä»¥çœ‹åˆ°åœ¨ä¸€æ®µæ—¶é—´å†…æœ€è€—æ—¶çš„æ¥å£, åªèƒ½çœ‹åˆ°å‡ ä¹æ‰€æœ‰æ¥å£éƒ½å˜é«˜äº†, å æ¯”æœ€é«˜çš„è¿˜æ˜¯é‚£å‡ ä¸ªæœ€æ…¢çš„æ¥å£, å¹¶ä¸èƒ½è§£é‡Šçªå‘çš„ latency å˜åŒ–.  å¼€å§‹æ¨æµ‹, æ™šä¸Šçš„ 10 ç‚¹åˆ° 11 ç‚¹,ç¾å›½é‚£è¾¹ç”¨æˆ·å·®ä¸å¤šèµ·åºŠ,æ˜¯æ¯å¤©ç¬¬ä¸€æ¬¡æ‰“å¼€ app çš„æ—¶å€™, è€Œæˆ‘ä»¬æœ‰äº›æ¥å£é‡Œå¾ˆæ…¢çš„ code path åªæœ‰ç”¨æˆ·åœ¨ä¸€å¤©å†…ç¬¬ä¸€æ¬¡ä½¿ç”¨ app çš„æ—¶å€™æ‰ä¼šè§¦å‘, é‚£è¾¹çš„ä¸šåŠ¡é€»è¾‘æœ¬æ¥å°±å¾ˆæ··ä¹±, å¼€å§‹ç€æ‰‹ä¼˜åŒ–ä¸šåŠ¡ä»£ç .
 çœ‹ datadog çš„ apm tracing, æŸ¥çœ‹æ…¢æ¥å£å¯¹å„ç§ service çš„è°ƒç”¨æƒ…å†µ (Redis, MySQL, ElasticSearch,DynamoDB&amp;hellip;) é€šè¿‡ pyflame æŠ“å–è¿›ç¨‹è¿è¡Œæ—¶çš„ stack trace.</description>
    </item>
    
    <item>
      <title>Access sensitive variables on AWS lambda</title>
      <link>https://blog.monsterxx03.com/2018/02/28/access-sensitive-variables-on-aws-lambda/</link>
      <pubDate>Wed, 28 Feb 2018 21:45:23 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/02/28/access-sensitive-variables-on-aws-lambda/</guid>
      <description>AWS lambda is convenient to run simple serverless application, but how to access sensitive data in code? like password,token&amp;hellip;
Usually, we inject secrets as environment variables, but they&amp;rsquo;re still visable on lambda console. I don&amp;rsquo;t use it in aws lambda.
The better way is use aws parameter store as configuration center. It can work with KMS to encrypt your data.
Code example:
client = boto3.client(&#39;ssm&#39;) resp = client.get_parameter( Name=&#39;/redshift/admin/password&#39;, WithDecryption=True ) resp: { &amp;quot;Parameter&amp;quot;: { &amp;quot;Name&amp;quot;: &amp;quot;/redshift/admin/password&amp;quot;, &amp;quot;Type&amp;quot;: &amp;quot;SecureString&amp;quot;, &amp;quot;Value&amp;quot;: &amp;quot;password value&amp;quot;, &amp;quot;Version&amp;quot;: 1 } }  Things you need to do to make it work:</description>
    </item>
    
    <item>
      <title>ç”¨ google spreadsheet è®¡ç®—æˆ¿è´·ç­‰é¢æœ¬æ¯è¿˜æ¬¾</title>
      <link>https://blog.monsterxx03.com/2018/02/25/%E7%94%A8-google-spreadsheet-%E8%AE%A1%E7%AE%97%E6%88%BF%E8%B4%B7%E7%AD%89%E9%A2%9D%E6%9C%AC%E6%81%AF%E8%BF%98%E6%AC%BE/</link>
      <pubDate>Sun, 25 Feb 2018 13:59:11 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/02/25/%E7%94%A8-google-spreadsheet-%E8%AE%A1%E7%AE%97%E6%88%BF%E8%B4%B7%E7%AD%89%E9%A2%9D%E6%9C%AC%E6%81%AF%E8%BF%98%E6%AC%BE/</guid>
      <description>çœ‹æˆ¿çœ‹çš„çœ¼èŠ±ç¼­ä¹±, ç½‘ä¸Šæœ‰å¾ˆå¤šæˆ¿è´·è®¡ç®—å™¨, ä½†éƒ½æ²¡ä»€ä¹ˆæ–¹ä¾¿çš„æ¯”ä»·åŠŸèƒ½, èƒ½ç›´è§‚å¾—çœ‹åˆ°é¦–ä»˜å’Œæœˆä¾›å°±å¥½å•¦, ä½†ä¹Ÿä¸æƒ³æ³¨å†Œï¼Œä¸æƒ³è€æ”¶ä¸­ä»‹çš„å¹¿å‘Š,ç´¢æ€§ç”¨ google spreadsheet è‡ªå·±åšä¸ªç®€å•çš„å§.
PMT å…¬å¼ å¯ä»¥ç”¨ PMT å…¬å¼æ¥è®¡ç®—ç­‰é¢æœ¬æ¯çš„æœˆä¾›é‡‘é¢: https://support.google.com/docs/answer/3093185?hl=zh-Hans
PMT(rate, number_of_periods, present_value, [future_value, end_or_beginning])  rate æ˜¯æ¯æœŸçš„åˆ©ç‡, å¦‚æœå•†è´·åŸºå‡†åˆ©ç‡æ˜¯ 0.049, æ¯æœˆè¿˜æ¬¾, rate å°±æ˜¯ 0.049/12.
number_of_periods æ˜¯è´·æ¬¾æœŸæ•°, å¹´æ•° * 12.
present_value æ˜¯è´·æ¬¾æ•°é¢.
PMT å…¬å¼ç®—å‡ºçš„å€¼æ˜¯è´Ÿæ•°ï¼Œéœ€è¦å–å.
å®é™…ä¾‹å­:
å•†è´·åŸºå‡†åˆ©ç‡=0.049 åˆ©ç‡å€æ•°=1 é¦–ä»˜ç™¾åˆ†æ¯”=0.3 è´·æ¬¾å¹´æ•°=30 å…¬ç§¯é‡‘è´·æ¬¾åˆ©ç‡=0.0325 å…¬ç§¯é‡‘è´·æ¬¾æ•°é¢=300000 æˆ¿äº§å•ä»·=14000 å»ºç­‘é¢ç§¯=85  æˆ¿å±‹æ€»ä»·=14000 * 85=1190000 é¦–ä»˜= 1190000 * 0.3 = 357000 å•†è´·=1190000-357000-300000=533000
æœˆä¾›= -PMT(0.049/12 * 1, 30*12, 533000) - PMT(0.0325/12, 30 * 12, 300000) =4134</description>
    </item>
    
    <item>
      <title>Glow Infra Evolution</title>
      <link>https://blog.monsterxx03.com/2018/02/23/glow-infra-evolution/</link>
      <pubDate>Fri, 23 Feb 2018 23:25:13 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/02/23/glow-infra-evolution/</guid>
      <description>Glow data infrastructure çš„æ¼”åŒ– Glow ä¸€å‘æ˜¯ä¸€ä¸ª data driven åšå†³ç­–çš„å…¬å¸ï¼Œç¨³å®šé«˜æ•ˆçš„å¹³å°æ˜¯å¿…ä¸å¯å°‘çš„æ”¯æ’‘, æœ¬æ–‡æ€»ç»“å‡ å¹´é‡Œå…¬å¸ data infrastructure çš„æ¼”è¿›è¿‡ç¨‹.
ç»“åˆä¸šåŠ¡ç‰¹ç‚¹åšæŠ€æœ¯é€‰å‹å’Œå®ç°æ—¶å€™çš„å‡ ä¸ªåŸåˆ™:
 real time åˆ†æçš„éœ€æ±‚ä¸é«˜ï¼Œæ—¶é—´ delta æ§åˆ¶åœ¨1 å°æ—¶ä»¥å†…å¯æ¥å— . æ”¯æŒå¿«é€Ÿçš„äº¤äº’å¼æŸ¥è¯¢. åº•å±‚å¹³å°å°½é‡é€‰æ‹© AWS æ‰˜ç®¡æœåŠ¡, å‡å°‘ç»´æŠ¤æˆæœ¬. é‡åˆ°æ•…éšœ, æ•°æ®å¯ä»¥ delay ä½†ä¸èƒ½ä¸¢. å¯å›æº¯å†å²æ•°æ®. æˆæœ¬å¯æ§.  ç”¨åˆ°çš„ AWS æœåŠ¡:
 æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢: S3, Redshift (spectrum), Athena ETL: DMS, EMR, Kinesis, Firehose, Lambda  å¼€æºè½¯ä»¶: td-agent, maxwell
æ•°æ®æ¥æº:
 çº¿ä¸Šä¸šåŠ¡æ•°æ®åº“ ç”¨æˆ·æ´»åŠ¨äº§ç”Ÿçš„ metrics log ä»å„ç§ç¬¬ä¸‰æ–¹æœåŠ¡ api æ‹‰ä¸‹æ¥çš„æ•°æ® (emailä¹‹ç±»)  æœ€æ—©æœŸ åˆšå¼€å§‹çš„æ—¶å€™ä¸šåŠ¡å•çº¯ï¼Œæ•°æ®é‡ä¹Ÿå°‘, æ‰€æœ‰æ•°æ®éƒ½ç”¨ MySQL å­˜å‚¨ï¼Œæ­äº†å° slave, åˆ†ææŸ¥è¯¢éƒ½åœ¨ slave ä¸Šè¿›è¡Œ.</description>
    </item>
    
    <item>
      <title>Get Real Client Ip on AWS</title>
      <link>https://blog.monsterxx03.com/2018/02/01/get-real-client-ip-on-aws/</link>
      <pubDate>Thu, 01 Feb 2018 15:20:37 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2018/02/01/get-real-client-ip-on-aws/</guid>
      <description>If you run a webserver on AWS, get real client ip will be tricky if you didn&amp;rsquo;t configure server right and write code correctly.
Things related to client real ip:
 CloudFront (cdn) ALB (loadbalancer) nginx (on ec2) webserver (maybe a python flask application).  Request sequence diagram will be like following:
User&amp;rsquo;s real client ip is forwarded by front proxies one by one in head X-Forwarded-For.
For CloudFront:
 If user&amp;rsquo;s req header don&amp;rsquo;t have X-Forwarded-For, it will set user&amp;rsquo;s ip(from tcp connection) in X-Forwarded-For If user&amp;rsquo;s req already have X-Forwarded-For, it will append user&amp;rsquo;s ip(from tcp connection) to the end of X-Forwarded-For  For ALB, rule is same as CloudFront, so the X-Forwarded-For header pass to nginx will be the value received from CloudFront + CloudFront&amp;rsquo;s ip.</description>
    </item>
    
    <item>
      <title>DynamoDB</title>
      <link>https://blog.monsterxx03.com/2017/12/15/dynamodb/</link>
      <pubDate>Fri, 15 Dec 2017 22:24:36 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/12/15/dynamodb/</guid>
      <description>DynamoDB æ˜¯ AWS çš„æ‰˜ç®¡ NoSQL æ•°æ®åº“ï¼Œå¯ä»¥å½“ä½œç®€å•çš„ KV æ•°æ®åº“ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ–‡æ¡£æ•°æ®åº“ä½¿ç”¨.
Data model ç»„ç»‡æ•°æ®çš„å•ä½æ˜¯ table, æ¯å¼  table å¿…é¡»è®¾ç½® primary key, å¯ä»¥è®¾ç½®å¯é€‰çš„ sort key æ¥åšç´¢å¼•.
æ¯æ¡æ•°æ®è®°ä½œä¸€ä¸ª item, æ¯ä¸ª item å«æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª attribute, å…¶ä¸­å¿…é¡»åŒ…æ‹¬ primary key.
attribute å¯¹åº”çš„ value æ”¯æŒä»¥ä¸‹å‡ ç§ç±»å‹:
 Number, ç”±äº DynamoDB çš„ä¼ è¾“åè®®æ˜¯ http + json, ä¸ºäº†è·¨è¯­è¨€çš„å…¼å®¹æ€§, number ä¸€å¾‹ä¼šè¢«è½¬æˆ string ä¼ è¾“. Binary, ç”¨æ¥è¡¨ç¤ºä»»æ„çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œä¼šç”¨ base64 encode åä¼ è¾“. Boolean, true or false Null Document ç±»å‹åŒ…å« List å’Œ Map, å¯ä»¥äº’ç›¸åµŒå¥—.  List, ä¸ªæ•°æ— é™åˆ¶, æ€»å¤§å°ä¸è¶…è¿‡ 400KB Map, å±æ€§ä¸ªæ•°æ— é™åˆ¶ï¼Œæ€»å¤§å°ä¸è¶…è¿‡ 400 KB, åµŒå¥—å±‚çº§ä¸è¶…è¿‡ 32 çº§.</description>
    </item>
    
    <item>
      <title>Handle outage</title>
      <link>https://blog.monsterxx03.com/2017/12/10/handle-outage/</link>
      <pubDate>Sun, 10 Dec 2017 11:13:53 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/12/10/handle-outage/</guid>
      <description>A few weeks ago, production environment came to an outage, solve it cost me 8 hours (from 3am to 11am) although total down time is not long, really a bad expenrience. Finally, impact was mitigated, and I&amp;rsquo;m working on a long term solution. I learned some important things from this accident.
The outage I received alarms about live performance issue at 3am, first is server latency increaing, soon some service&amp;rsquo;s health check failed due to high load.</description>
    </item>
    
    <item>
      <title>AWS DMS notes</title>
      <link>https://blog.monsterxx03.com/2017/10/14/aws-dms-notes/</link>
      <pubDate>Sat, 14 Oct 2017 22:33:36 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/10/14/aws-dms-notes/</guid>
      <description>AWS&amp;rsquo;s DMS (Data migration service) can be used to do incremental ETL between databases. I use it to load data from RDS (MySQL) to Redshift.
It works, but have some concerns. Take some notes when doing this project.
Prerequisites Source RDS must:
 Enable automatic backups Increase binlog remain time, call mysql.rds_set_configuration(&#39;binlog retention hours&#39;, 24); Set binlog_format to ROW. Privileges on source RDS: REPLICATION CLIENT, REPLICATION SLAVE, SELECT on replication target tables  DDL on source table Redshift has some limits on change columns:</description>
    </item>
    
    <item>
      <title>Get all invalid PTR record on  Route53</title>
      <link>https://blog.monsterxx03.com/2017/09/29/get-all-invalid-ptr-record-on-route53/</link>
      <pubDate>Fri, 29 Sep 2017 08:55:18 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/09/29/get-all-invalid-ptr-record-on-route53/</guid>
      <description>I use autoscaling group to manage stateless servers. Servers go up and down every day.
Once server is up, I will add a PTR record for it&amp;#8217;s internal ip. But when it&amp;#8217;s down, I didn&amp;#8217;t cleanup the PTR record. As times fly, a lot of invalid PTR records left in Route53.
To cleanup those PTR records realtime, you can write a lambda function, use server termination event as trigger. But how to cleanup the old records at once?</description>
    </item>
    
    <item>
      <title>Build private static website on S3</title>
      <link>https://blog.monsterxx03.com/2017/08/19/build-private-staticwebsite-on-s3/</link>
      <pubDate>Sat, 19 Aug 2017 07:28:16 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/08/19/build-private-staticwebsite-on-s3/</guid>
      <description>Build static website on S3 is very easy, but by default, it can be accessed by open internet.It will be super helpful if we can build website only available in VPC. Then we can use it to host internal deb repo, doc site&amp;#8230;
Steps are very easy, you only need VPC endpoints and S3 bucket policy.
AWS api is open to internet, if you need to access S3 in VPC, your requests will pass through VPC&amp;#8217;s internet gateway or NAT gateway.</description>
    </item>
    
    <item>
      <title>æ—…è¡Œæ•£è®°</title>
      <link>https://blog.monsterxx03.com/2017/08/13/%E6%97%85%E8%A1%8C%E6%95%A3%E8%AE%B0/</link>
      <pubDate>Sun, 13 Aug 2017 15:18:52 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/08/13/%E6%97%85%E8%A1%8C%E6%95%A3%E8%AE%B0/</guid>
      <description>å‰é˜µå­æ€»æœ‰ç‚¹å¿ƒçƒ¦æ„ä¹±çš„ï¼Œç”Ÿæ´»ä¸Šçš„ï¼Œå®¶é‡Œçš„ï¼Œå µåœ¨ä¸€å—ï¼Œå¼„å¾—è‡ªå·±éƒ½æœ‰ç‚¹ç–²æƒ«äº†ï¼Œ8æœˆåˆçš„æ—¶å€™å»æ—¥æœ¬ä¸œåŒ—é€›äº†ä¸€åœˆï¼Œæ°é€¢å½“åœ°ç¥­å¥ å¯†é›†æœŸï¼Œä¹Ÿå°±å‡‘äº†æŠŠçƒ­é—¹ï¼Œè¿˜æŒºæœ‰æ„æ€ã€‚
è¡Œç¨‹: ä¸Šæµ· -&amp;gt; ä¸œäº¬ -&amp;gt; ç››å†ˆ -&amp;gt; å…«æˆ· -&amp;gt; åå’Œç”°æ¹– -&amp;gt; é’æ£® -&amp;gt; å¼˜å‰ -&amp;gt; ä¸œäº¬ -&amp;gt; ä¸Šæµ·, æ»¡æ»¡å½“å½“çš„7å¤©, æ‡’å¾—è´´å›¾ï¼Œçè®°ä¸€ç‚¹ã€‚
ç››å†ˆæ˜¯å²©æ‰‹å¿çš„é¦–åºœï¼Œä½†åˆšåˆ°çš„æ—¶å€™æ„Ÿè§‰çœŸæ˜¯ä¸ªå¤§ä¹¡ä¸‹å•Šï¼Œå¤§ç™½å¤©ï¼Œå‡ºäº†è½¦ç«™åŒºåŸŸï¼Œæ­¥è¡Œ1å…¬é‡Œå¤šçš„æ—¶é—´é‡Œåªç¢°åˆ°äº†2ä¸ªäººï¼Œä¸€ä¸ªæ¡¥ä¸‹ç¡è§‰çš„å¤§å”ï¼Œä¸€ä¸ªé›ç‹—çš„ï¼Œåƒä¸ªé¬¼åŸä¼¼çš„ï¼Œè¶…çº§ä¸ä¹ æƒ¯ã€‚åˆ°äº†æ™šä¸Šï¼Œå½“åœ°æœ‰ä¸‰é£’èˆç¥­å…¸ï¼Œä¸€ä¸‹å­ä¸çŸ¥ä»å“ªå†’å‡ºæ¥å¥½å¤šäººã€‚å¤§å®¶èšåœ¨ä¸€èµ·ï¼Œå„ç§è·¯è¾¹æ‘Šä¹°ä¹°ä¹°ï¼Œåƒåƒåƒï¼Œçƒ­é—¹çš„ä¸æ•¢ç›¸ä¿¡æ˜¯ç™½å¤©é‚£ä¸ªåŸå¸‚ã€‚ä¸‰é£’èˆæ˜¯å½“åœ°ä¸€ç§ä¼ ç»Ÿèˆè¹ˆ(ä¼ è¯´æ˜¯ä¸ºäº†å°å°ä¸€ä¸ªä»€ä¹ˆé¬¼çš„)ï¼Œä¸€è¾¹è·³ä¸€è¾¹å‰è¿›ï¼Œæœ‰çš„æ‰“å¤ªé¼“ï¼Œæœ‰çš„å¹ç¬›ï¼Œæœ‰çš„ç©ºæ‰‹ï¼Œè·³çš„ä¸“ä¸šçš„è¿˜æŒºå¥½çœ‹çš„ï¼Œä¹Ÿæœ‰å¾ˆå¤šå……æ•°çš„å°ç›†å‹å•¦:). å‚åŠ çš„éƒ½æ˜¯å½“åœ°ä¸€äº›å›¢ä½“å’Œä¼ä¸šï¼ŒåŸºæœ¬å°±å½“æ˜¯ä¸€æ¬¡å¤§å‹å¹¿å‘Šå·¡æ¸¸, å½“æ‰“å¤ªé¼“çš„æ–¹é˜µç»è¿‡é¢å‰çš„æ—¶å€™ï¼Œæ°”åŠ¿è¿˜æ˜¯å¾ˆéœ‡æ’¼çš„ã€‚åœ¨ç››å†ˆå‘†äº†ä¸¤å¤©ï¼Œä»åˆšåˆ°çš„ä¸é€‚åº”ä¸€ä¸‹å˜å¾—ç›¸å½“äº«å—é‚£é‡Œçš„åŸå¸‚æ°›å›´, åŸå¸‚é‡Œåˆ°å¤„éƒ½æ˜¯é£é“ƒå’Œç´«é˜³èŠ±ï¼Œé—²é€‚çš„ç”Ÿæ´»ï¼Œç¬¬ä¸€æ¬¡è¿™ä¹ˆå‘å¾€åœ¨ä¸€ä¸ªåŸå¸‚ç”Ÿæ´»ã€‚
å…«æˆ·è¿™ä¸ªç›¸å¯¹æ¥è¯´å°±æ²¡é‚£ä¹ˆå¤šæ„Ÿè§‰äº†ï¼Œé æµ·è¾¹æ¯”è¾ƒè¿‘ï¼Œæµ·é£å¾ˆèˆ’æœï¼Œä½†å¾ˆå¤šå»ºç­‘éƒ½ç ´ç ´çƒ‚çƒ‚çš„ï¼Œé£åŒ–å¾ˆä¸¥é‡ï¼Œä½çš„é…’åº—ä¹Ÿæ˜¯ç ´ç ´çƒ‚çƒ‚çš„ï¼Œåœ¨é‚£è¾¹çœ‹äº†ä¸€ä¸ªå…«æˆ·ä¸‰ç¤¾å¤§ç¥­ï¼Œæ˜¯å½“åœ°ä¸‰ä¸ªç¥ç¤¾è”åˆä¸¾åŠçš„å¤æ—¥ç¥­å…¸ã€‚å‰é¢æ˜¯å„ç§ç©¿ç€ä¼ ç»Ÿæœè£…çš„æ¸¸è¡Œé˜Ÿä¼ï¼Œåé¢æ˜¯ä¸€åº§åº§è£…æ‰®åä¸½çš„èŠ±è½¦ï¼Œå•Šå•Šå•Šï¼Œçœ‹åˆ°äº†è¶…å¯çˆ±çš„å°èè‰, è¿˜æœ‰å¾ˆæœ‰è¶£çš„æ—¥æœ¬çŸ®ç§é©¬ï¼Œè¶…miniï¼Œè¿˜ä¸å¤ªå¬è¯ï¼Œå‡ ä¸ªäººç¡¬æ‹½ç€æ‰è‚¯å¾€å‰èµ°ã€‚
å»å…«æˆ·çš„æ—¶å€™ï¼Œåè¿‡å¤´ï¼Œåˆ°äº†ä¸€ä¸ªå«é²›(æ—¥è¯­shame, é²¨é±¼çš„æ„æ€)çš„å°é•‡ï¼Œç¬é—´è§‰å¾—è¿™æ‰æ˜¯çœŸä¹¡ä¸‹. é™¤äº†æµ·é¸¥å’Œé±¼ä¸€æ— æ‰€æœ‰ï¼Œè¿ä¸ªé¥­é¦†éƒ½æ²¡æ‰¾åˆ°ï¼Œè´¹è€å¤§åŠ²æ‰¾åˆ°äº†é•‡ä¸Šå”¯ä¸€ä¸€ä¸ªè¶…å¸‚ï¼Œä¹°åˆ°äº†ä¸ªå¯ä¹é¥¼å……é¥¥ï¼Œè½¦ç«™é‡Œè´´ç€çš„é€šç¼‰ä»¤è¿˜æ˜¯åå‡ å¹´å‰çš„ï¼Œæ—¶é—´å¥½åƒåœ¨è¿™ä¸ªå°é•‡ä¸Šå‡å›ºäº†ã€‚åœ¨è½¦ç«™ç­‰è½¦çš„æ—¶å€™ï¼Œçœ‹ç€é‚£ä¸ªå°å°çš„è½¦ç«™ï¼Œçªç„¶æ˜ç™½äº†ä¸ºä»€ä¹ˆæ—¥æœ¬æœ‰é‚£ä¹ˆå¤šçš„é“é“å®…ï¼Œä»–ä»¬åˆæ˜¯ä¸ºä»€ä¹ˆå¯¹é“è·¯æ–‡åŒ–é‚£ä¹ˆç—´è¿·ã€‚é¡ºç€èœ¿èœ’çš„é“è½¨æœè¿œå¤„çœ‹å»ï¼Œé™¤äº†å±±å’Œäº‘ï¼Œå°±æ˜¯è‰ï¼Œè¿™å’Œåœ¨ä¸œäº¬é‚£ç§å¤§åŸå¸‚çš„ç«™å¤´çœŸæ˜¯å®Œå…¨ä¸åŒçš„æ„Ÿè§‰ã€‚
åœ¨å…«æˆ·åªå‘†äº†ä¸€æ™šï¼Œä¸»è¦æ˜¯ä¸ºäº†ç¬¬äºŒå¤©å»åå’Œç”°æ¹–çš„ã€‚åå¤§å·´åœ¨çŸ³ä¹‹æˆ·ä¸‹äº†è½¦ï¼Œåƒäº†ç¢—æ‹‰é¢å‡†å¤‡æ­¥è¡Œ14å…¬é‡Œåˆ°åå’Œç”°æ¹–ã€‚ä¼ è¯´çŸ³ä¹‹æˆ·é‚£é‡Œï¼Œåœ¨å¤ä»£æœ‰ç¾å¥³ç›—è´¼æ²¿é€”æ‰“åŠ«ç”·æ€§ï¼Œæƒ³æƒ³æœ‰ç‚¹å°æ¿€åŠ¨å‘¢,å“ˆå“ˆã€‚å»åå’Œç”°æ¹–çš„è¿™æ®µè·¯å«å¥¥å…¥æ¿‘æºªæµï¼Œä¹Ÿæ˜¯ä¸ªæœ‰åçš„æ™¯ç‚¹ï¼Œæ²¡æœ‰å›½å†…é‚£ç§å¤§å±±å¤§æ²³çš„å¼€é˜”æ™¯è‰²ï¼Œæœªç»äººå·¥ä¿®é¥°çš„é£æ™¯å´ç›¸å½“æœ‰æ—¥æœ¬é‚£ç§ä¼ ç»Ÿçš„ç¦…æ„, å¤å¤©ç»¿æ²¹æ²¹çš„ï¼Œä¼°è®¡åœ¨çº¢å¶å­£èŠ‚åº”è¯¥ç›¸å½“ç¾ã€‚
åå’Œç”°æ¹–æ˜¯ä¸ªç«å±±æ¹–ï¼Œæ°´è´¨å¾ˆæ¸…ï¼Œäº‘å¾ˆæ¼‚äº®ï¼Œå€¼å¾—ä¸€å»ã€‚å°±æ˜¯åœ¨é‚£è¾¹ä½å®¿çš„æ—¶å€™å¾ˆä¸æ„‰å¿«ï¼Œå› ä¸ºé…’åº—å®šçš„æ™šäº†ï¼Œåªèƒ½å®šèƒŒåŒ…å®¢æ ˆçš„åºŠä½ï¼Œç»“æœæ˜¯å’Œä¸€å®¶å­éŸ©å›½äºº5ä¸ªä¸€é—´æˆ¿ï¼Œå¥½å´©æºƒï¼Œä¸€å®¶äººéƒ½è¶…çº§æ²¡æœ‰ç¤¼è²Œçš„ï¼Œæ‰“æ‹›å‘¼æ ¹æœ¬ä¸é¸Ÿæˆ‘ã€‚æ™šä¸Šä¸€å®¶äººçš„å¥¶å¥¶å¤§å‘¼å£°éŸ³è¶…å¯æ€•ï¼Œæˆ‘è¢«åµå¾—ç¡ä¸ç€ï¼Œç´¢æ€§è·‘åˆ°æ—…é¦†å¤§å…é€šå®µçœ‹ä¹¦ã€‚çœ‹äº†ä¼šèµ°è¿‡æ¥ä¸ªæ—¥æœ¬å¤§å”ï¼Œè‹±è¯­å¾ˆæ£’ï¼ŒçèŠäº†ä¸€å¥ï¼Œè¯é¢˜åŸºæœ¬é›†ä¸­åœ¨å®‰å€æ˜¯ä¸ªsbï¼Œç¦å²›å¾ˆä¸å¦™å•Šå·´æ‹‰å·´æ‹‰ï¼Œè¿˜æ˜¯ä¸ªå¾ˆä¸é”™çš„å¤§å”ï¼ŒæœŸé—´ä»–çš„ä¸€ä¸ªä¼™ä¼´è·‘è¿‡æ¥å·å·åœ¨æ¡Œå­è§’ä¸Šè´´äº†å¼ è‡ªå·±åšçš„è´´çº¸ï¼Œå®å˜±æˆ‘åƒä¸‡åˆ«å‘Šè¯‰è€æ¿æ˜¯ä»–å¹²çš„ï¼Œæœ‰æ„æ€ã€‚ä»–ä»¬èµ°åï¼Œä¸ä¹…è€æ¿æ¥å·¡å¤œï¼ŒçŸ¥é“æˆ‘è¢«åµå¾—ç¡ä¸ç€åï¼Œå¸¦æˆ‘å»äº†special room! åœ¨æ”¾æ‚ç‰©çš„æˆ¿é—´é‡Œå°½ç„¶æœ‰åºŠé“ºï¼Œæ„ŸåŠ¨ï¼è€æ¿æ‚¨çœŸçš„è¶…çº§niceå•Šã€‚
åœ¨é’æ£®æ²¡å®šåˆ°é…’åº—ï¼Œä½åœ¨äº†å¼˜å‰ä¸€å®¶æœ‰200å¹´å†å²çš„æ—…é¦†é‡Œï¼Œå¾ˆä¼ ç»Ÿçš„æ—¥å¼æ—…é¦†ï¼Œæˆ¿å­å¾ˆè€ï¼Œä½†ä½“éªŒå¾ˆä¸é”™ï¼Œå”¯ä¸€çº ç»“çš„å°±æ˜¯æ³¡æ¾¡çš„è¯æˆ‘æ˜¯åº”è¯¥æŠŠæ°´æ”¾æ‰è¿˜æ˜¯ç•™ç€ç»™ä¸‹ä¸ªäººå‘¢ï¼Œå®åœ¨åƒä¸å‡†ï¼Œç»“æœå°±æ´—äº†ä¸ªæ·‹æµ´ã€‚å¼˜å‰å’Œé’æ£®éƒ½æœ‰ç¡é­”ç¥­ï¼Œä¹Ÿæ˜¯èŠ±è½¦ï¼Œä¸è¿‡æ˜¯å¸¦ç¯çš„ï¼Œæ‰€ä»¥æ˜¯æ™šä¸Šå¼€å§‹ã€‚å¼˜å‰äººçš„çƒ­æƒ…æ›´æœ‰æ„ŸæŸ“åŠ›ï¼Œé’æ£®çš„èŠ±è½¦èµåŠ©æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æ›´å£®è§‚ä¸€ç‚¹:).å¼˜å‰æœ‰ä¸ªå‰ç¥¥ç‰©é¹°ä¸¸å›ï¼Œæœ¬æ¥å¤´ä¸Šæˆ´çš„æ˜¯å¼˜å‰åŸçš„å¤©å®ˆé˜ï¼Œå› ä¸ºå¤©å®ˆç°åœ¨åœ¨ç¿»ä¿®ï¼Œå˜æˆäº†å¤´ä¸Šæˆ´å®‰å…¨å¸½ï¼Œä¹Ÿæ˜¯æœ‰æ„æ€ã€‚é’æ£®è½¦ç«™æ—è¾¹æœ‰ä¸ªA factory, é‡Œé¢æœ‰å¾ˆå¤šè‹¹æœåˆ¶ç‰¹äº§ï¼Œå€¼å¾—ä¸€é€›ï¼Œè¦ä¸æ˜¯åªæœ‰ä¸€ä¸ªèƒŒåŒ…ï¼ŒçœŸçš„æƒ³å¡å¥½å¤šä¸œè¥¿å›æ¥ã€‚
éƒ½è¯´ä¸œåŒ—ç»æµä¸è¡Œï¼Œå¹´è½»äººéƒ½å¾€ä¸œäº¬è·‘å•¦ï¼Œåœ¨é‚£è¾¹å‡ å¤©ï¼Œç¡®å®æ„Ÿè§‰ç™½å¤©æ²¡æœ‰ä¸œäº¬çš„é‚£ç§å•†ä¸šæ°›å›´ã€‚ä½†ä»–ä»¬çš„ç¥­å…¸æ„ŸæŸ“åŠ›çœŸçš„è¶…å¼ºï¼Œå°±æˆ‘è¿™ä¹ˆä¸€ä¸ªçè·‘è¿‡å»å‡‘çƒ­é—¹çš„å®¶ä¼™ä¹Ÿèƒ½çœ‹å¾—æƒ…ç»ªé«˜æ¶¨ï¼Œä¸€å¹´ä¸€æ¬¡çš„ç¥­å…¸ï¼ŒçœŸçš„å˜æˆäº†å‡èšå½“åœ°å±…æ°‘çš„ä¸€ç§ä»ªå¼ï¼Œä¸€å®¶äººååœ¨è·¯è¾¹ï¼Œæ’¸ä¸²å–å•¤é…’ï¼Œçœ‹æ¸¸è¡Œï¼ŒçœŸçš„å¥½ç¾¡æ…•ï¼Œè¿™æ ·çš„åœºæ™¯ï¼Œåœ¨å›½å†…æ€æ ·éƒ½ä¸ä¼šæœ‰å“ã€‚</description>
    </item>
    
    <item>
      <title>Use redshift spectrum to do query on s3</title>
      <link>https://blog.monsterxx03.com/2017/07/21/use-redshift-spectrum-to-do-query-on-s3/</link>
      <pubDate>Fri, 21 Jul 2017 03:10:58 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/07/21/use-redshift-spectrum-to-do-query-on-s3/</guid>
      <description>ä½¿ç”¨ redshift spectrum æŸ¥è¯¢ S3 æ•°æ® é€šå¸¸ä½¿ç”¨ redshift åšæ•°æ®ä»“åº“çš„æ—¶å€™è¦åšå¤§é‡çš„ ETL å·¥ä½œï¼Œä¸€èˆ¬æµç¨‹æ˜¯æŠŠå„ç§æ¥æºçš„æ•°æ®æ£é¼“æ£é¼“ä¸¢åˆ° S3 ä¸Šå»ï¼Œå†ä» S3 å€’è…¾è¿› redshift. å¦‚æœä½ æœ‰å¤§é‡çš„å†å²æ•°æ®è¦å¯¼è¿› redshiftï¼Œè¿™ä¸ªè¿‡ç¨‹å°±ä¼šå¾ˆç—›è‹¦ï¼Œredshift å¯¹ä¸€æ¬¡å€’å…¥å¤§é‡æ•°æ®å¹¶ä¸å‹å¥½ï¼Œä½ è¦åˆ†æ‰¹æ¥åšã€‚
ä»Šå¹´4æœˆçš„æ—¶å€™ï¼Œ redshift å‘å¸ƒäº†ä¸€ä¸ªæ–°åŠŸèƒ½ spectrum, å¯ä»¥ä» redshift é‡Œç›´æ¥æŸ¥è¯¢ s3 ä¸Šçš„ç»“æ„åŒ–æ•°æ®ã€‚æœ€è¿‘æŠŠéƒ¨åˆ†æ•°æ®ä»“åº“ç›´æ¥è¿ç§»åˆ°äº† spectrum, æ­£å¥½æ¥è®²è®²ã€‚
åŠ¨æœº Glow çš„æ•°æ®ä»“åº“å»ºåœ¨ redshift ä¸Šï¼Œ åˆåˆ†æˆäº†ä¸¤ä¸ªé›†ç¾¤ï¼Œä¸€ä¸ª ssd çš„é›†ç¾¤å­˜æ”¾æœ€è¿‘ 4 ä¸ªæœˆçš„æ•°æ®ï¼Œä¾›äº§å“åˆ†æï¼Œmetrics report, debug ç­‰ç­‰ adhoc çš„æŸ¥è¯¢ã€‚4ä¸ªæœˆä¹‹å‰çš„æ•°æ®å­˜æ”¾åœ¨ä¸€ä¸ª hdd çš„é›†ç¾¤é‡Œï¼Œä¾¿å®œå®¹é‡å¤§ï¼ŒæŸ¥è¯¢æ…¢ã€‚
ä½†æ˜¯æ—¶é—´é•¿äº† hdd çš„é›†ç¾¤ä¹Ÿæ˜¯æœ‰æ‰©å®¹éœ€æ±‚çš„ï¼Œè€Œä½¿ç”¨é¢‘ç‡åˆå®åœ¨æ˜¯ä¸é«˜ï¼Œå…¶å®å¾ˆæµªè´¹, è¿™å°±æ˜¯è¿ç§»åˆ° spectrum çš„åŠ¨æœºã€‚
ä½¿ç”¨ Spectrum Redshift spectrum åº•å±‚å…¶å®æ˜¯åŸºäº AWS çš„å¦ä¸€ä¸ªæœåŠ¡ athena çš„ã€‚athena æ˜¯ä¸ª Presto å’Œ Hive æ‚äº¤äº§ç‰©ï¼Œ DDL ç”¨ Hive è¯­æ³•ï¼Œ æŸ¥è¯¢ç”¨çš„ sql ç”± Presto æ”¯æŒ, æ„Ÿè§‰æ€ªæ€ªçš„ï¼Œè¿™é‡Œä¸å¤šå±•å¼€è®² athena, çŸ¥é“ redshift spectrum å…¶å®æ˜¯é€šè¿‡ athena å¯¹æ¥çš„ s3 å°±è¡Œäº†ã€‚</description>
    </item>
    
    <item>
      <title>Enable coredump on ubuntu 16.04</title>
      <link>https://blog.monsterxx03.com/2017/07/15/enable-coredump-on-ubuntu-16.04/</link>
      <pubDate>Sat, 15 Jul 2017 02:35:52 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/07/15/enable-coredump-on-ubuntu-16.04/</guid>
      <description>Coredump file is useful for debuging program crash. This post will show several settings related to coredump.
Enable coredump If you run program from shell , enable coredump via unlimit -c unlimitedï¼Œ then check unlimit -a | grep core, if it shows unlimited, coredump is enabled for your current session.
If your program is hosted by systemd, you need to edit your program&amp;#8217;s service unit file&amp;#8217;s [Service] section, add LimitCORE=infinity to enable coredump.</description>
    </item>
    
    <item>
      <title>Python Web åº”ç”¨æ€§èƒ½è°ƒä¼˜</title>
      <link>https://blog.monsterxx03.com/2017/07/01/python-web-%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/</link>
      <pubDate>Sat, 01 Jul 2017 23:38:24 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/07/01/python-web-%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/</guid>
      <description>Python web åº”ç”¨æ€§èƒ½è°ƒä¼˜ ä¸ºäº†å¿«é€Ÿä¸Šçº¿ï¼Œæ—©æœŸå¾ˆå¤šä»£ç åŸºæœ¬æ˜¯æ€ä¹ˆæ–¹ä¾¿æ€ä¹ˆæ¥ï¼Œè¿™æ ·å°±ç•™ä¸‹äº†å¾ˆå¤šéšæ‚£ï¼Œæ€§èƒ½ä¹Ÿä¸æ˜¯å¾ˆç†æƒ³ï¼Œpython å› ä¸º GIL çš„åŸå› ï¼Œåœ¨æ€§èƒ½ä¸Šæœ‰å¤©ç„¶åŠ£åŠ¿ï¼Œå³ä½¿ç”¨äº† gevent/eventlet è¿™ç§åç¨‹æ–¹æ¡ˆï¼Œä¹Ÿå¾ˆå®¹æ˜“å› ä¸ºè€—æ—¶çš„ CPU æ“ä½œé˜»å¡ä½æ•´ä¸ªè¿›ç¨‹ã€‚å‰é˜µå­å¯¹åŸºç¡€ä»£ç åšäº†äº›é‡æ„ï¼Œæ•ˆæœæ˜¾è‘—ï¼Œè®°å½•ä¸€äº›ã€‚
è®¾å®šç›®æ ‡:
 æ€§èƒ½æé«˜äº†ï¼Œæœ€ç›´æ¥çš„æ•ˆæœå½“ç„¶æ˜¯èƒ½ç”¨æ›´å°‘çš„æœºå™¨å¤„ç†ç›¸åŒæµé‡ï¼Œç›®æ ‡æ˜¯å…³é—­ 20% çš„ stateless webserver. å°½é‡åœ¨æ¡†æ¶ä»£ç ä¸Šåšæ”¹åŠ¨ï¼Œä¸åŠ¨ä¸šåŠ¡é€»è¾‘ä»£ç ã€‚ ä½é£é™© (å†å²ç»éªŒå‘Šè¯‰æˆ‘ä»¬ï¼ŒåŠ¨æ€ä¸€æ—¶çˆ½ï¼Œé‡æ„ç«è‘¬åœº&amp;hellip;.)  æ²»æ ‡ å¸¸è§åœºæ™¯æ˜¯å¤§å®¶å¼€å¼€å¿ƒå¿ƒåšå®Œä¸€ä¸ª featureï¼Œ sandbox æµ‹è¯•ä¹Ÿæ²¡å•¥é—®é¢˜ï¼Œä¸Šçº¿äº†ï¼Œç»“æœ server load é£™å‡ï¼Œå„ç§ timeout éƒ½æ¥äº†ï¼Œè¦ä¹ˆ rollback ä»£ç ï¼Œè¦ä¹ˆåŠ æœºå™¨ã€‚é—®é¢˜ä»£ç åœ¨å“ª?
æˆ‘ä»¬ç›‘æ§ç”¨çš„æ˜¯ datadog (statsdåè®®)ï¼Œå¯¹è¿™ç§é—®é¢˜æœ€æœ‰æ•ˆçš„æŒ‡æ ‡æ˜¯çœ‹æ¯ä¸ªæ¥å£çš„ avg_latency * req_count å¾—åˆ°æ¯ä¸ªæ¥å£åœ¨ä¸€æ®µæ—¶é—´å†…çš„æ€»è€—æ—¶ï¼Œåœ¨æŸ±çŠ¶å›¾ä¸Šæœ€é•¿çš„é‚£å—å°±æ˜¯å¯¹æ€§èƒ½å½±å“æœ€å¤§çš„æ¥å£ã€‚è¿›ä¸€æ­¥çš„è°ƒè¯•å°±é  cProfile å’Œè¯»ä»£ç äº†ã€‚
ä½†å¾ˆå¤šæ—¶å€™å‡ºé—®é¢˜çš„ä»£ç é€»è¾‘å·¨å¤æ‚ï¼Œè¿˜å¾ˆå¤šäººæ”¹åŠ¨è¿‡ï¼Œå¼€å‘å’Œ sandbox ç¯å¢ƒæ•°æ®çš„é‡å’Œçº¿ä¸Šå·®è·å¤ªå¤§ï¼Œæ— æ³•å¤ç°é—®é¢˜ï¼Œåœ¨çº¿ä¸Šç”¨ cProfile åªèƒ½æµ‹åªè¯»æ¥å£(ä¸ºäº†ä¸å†™åç”¨æˆ·æ•°æ®)ã€‚
è€Œä¸”è¿™ç§æ–¹å¼åªèƒ½æ²»æ ‡ï¼Œè°ƒè¯•ä¸ªåˆ«æ…¢çš„ä¸šåŠ¡æ¥å£ï¼Œç›®æ ‡é‡Œè¯´äº†åªæƒ³æ”¹æ¡†æ¶ï¼Œæé«˜æ•´ä½“æ€§èƒ½ï¼Œæ€ä¹ˆæ•´?
æ²»æœ¬ æˆ‘å¸Œæœ›èƒ½å¯¹è¿è¡Œæ—¶è¿›ç¨‹çŠ¶æ€æ‰“ snapshotï¼Œæ¯æ¬¡å¿«ç…§è®°å½•ä¸‹å½“å‰çš„å‡½æ•°è°ƒç”¨æ ˆï¼Œå åˆå¤šæ¬¡é‡‡æ ·ï¼Œå‡ºç°æ¬¡æ•°å¤šçš„å‡½æ•°å¿…ç„¶å°±æ˜¯ç“¶é¢ˆæ‰€åœ¨. è¿™æ€æƒ³åœ¨å…¶ä»–è¯­è¨€é‡Œç”¨çš„ä¹Ÿå¾ˆå¤šï¼Œå…¶å®å°±æ˜¯ Brendan Gregg çš„ flamegraph.
ä»¥å‰å†…éƒ¨åšè¿‡ç±»ä¼¼çš„äº‹æƒ…ï¼Œä¸è¿‡ä»£ç æ˜¯ä¾µå…¥å¼çš„ï¼Œåœ¨è¿è¡Œæ—¶é€šè¿‡ signal, inspect, traceback ç­‰æ¨¡å—ï¼Œå®šæœŸæ‰“è°ƒç”¨æ ˆçš„ snapshot, è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œè½¬æˆ svg çš„ flamegraph æ¥çœ‹ï¼Œä½†æ˜¯ overhead å¤ªé«˜ï¼Œåæ¥å¼ƒç”¨äº†ã€‚</description>
    </item>
    
    <item>
      <title>Build deb repository with fpm , aptly and s3</title>
      <link>https://blog.monsterxx03.com/2017/06/23/build-deb-repository-with-fpm-aptly-and-s3/</link>
      <pubDate>Fri, 23 Jun 2017 09:40:58 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/06/23/build-deb-repository-with-fpm-aptly-and-s3/</guid>
      <description>I&amp;#8217;m lazy, I don&amp;#8217;t want to be deb/rpm expert, I don&amp;#8217;t want to maintain repo server. I want as less maintenance effort as possible. ğŸ™‚
Combine tools fpm, aptly with aws s3, we can do it.
Use fpm to convert python package to deb fpm can transform python/gem/npm/dir/&amp;#8230; to deb/rpm/solaris/&amp;#8230; packages
Example:
fpm -s python -t deb -m xyj.asmy@gmail.com --verbose -v 0.10.1 --python-pip /usr/local/pip Flask  It will transform Flask 0.</description>
    </item>
    
    <item>
      <title>Debug python performance issue with pyflame</title>
      <link>https://blog.monsterxx03.com/2017/06/05/debug-python-performance-issue-with-pyflame/</link>
      <pubDate>Mon, 05 Jun 2017 09:50:44 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/06/05/debug-python-performance-issue-with-pyflame/</guid>
      <description>pyflame is an opensource tool developed by uber: https://github.com/uber/pyflame
It can take snapshots of running python process, combined with flamegraph.pl, can output flamegraph picture of python call stacks. Help analyze bottleneck of python program, needn&amp;#8217;t inject any perf code into your application, and overhead is very low.
Basic Usage sudo pyflame -s 10 -x -r 0.001 $pid | ./flamegraph.pl &amp;gt; perf.svg
 -s, how many seconds to run -r, sample rate (seconds)  Your output will be something like following:</description>
    </item>
    
    <item>
      <title>Designing data intensive application, reading notes, Part 2</title>
      <link>https://blog.monsterxx03.com/2017/05/17/designing-data-intensive-application-reading-notes-part-2/</link>
      <pubDate>Wed, 17 May 2017 09:12:44 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/05/17/designing-data-intensive-application-reading-notes-part-2/</guid>
      <description>Chapter 4, 5, 6
Encoding formats xml, json, msgpack are text based encoding format, they can&amp;#8217;t carry binary bytes (useless you encode them in base64, size grows 33%). And they cary schema definition with data, wast a lot of space.
thrift, protobuf are binary format, can take binary bytes, only carry data, the schema is defined with IDL(interface definition language). They have code generation tool to generate code to encode and decode data, along with check.</description>
    </item>
    
    <item>
      <title>Designing data intensive application, reading notes, Part 1</title>
      <link>https://blog.monsterxx03.com/2017/05/04/designing-data-intensive-application-reading-notes-part-1/</link>
      <pubDate>Thu, 04 May 2017 16:27:52 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/05/04/designing-data-intensive-application-reading-notes-part-1/</guid>
      <description>&lt;p&gt;Notes when reading chapter 2 &amp;#8220;Data models and query languages&amp;#8221;, chapter 3 &amp;#8220;Storage and retrieval&amp;#8221;&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>4æœˆå‘¨æœ«æ‚è®°</title>
      <link>https://blog.monsterxx03.com/2017/04/23/4%E6%9C%88%E5%91%A8%E6%9C%AB%E6%9D%82%E8%AE%B0/</link>
      <pubDate>Sun, 23 Apr 2017 16:26:04 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/04/23/4%E6%9C%88%E5%91%A8%E6%9C%AB%E6%9D%82%E8%AE%B0/</guid>
      <description>&lt;p&gt;æœˆåˆçš„æ—¶å€™æ¬äº†å®¶, ä¹‹åçš„å‘¨æœ«ä¸€ç›´åœ¨å¿™äº›ççç¢ç¢çš„äº‹æƒ…ï¼Œå˜›ï¼Œä»”ç»†ä¸€æƒ³ï¼Œé™¤äº†å»å®œå®¶æ¬äº†ä¸ªç”µè§†æŸœå›æ¥éƒ½ä¸è®°å¾—å¹²äº†å•¥&amp;#8230;&lt;/p&gt;

&lt;p&gt;è¿™å‘¨æœ«å¿ƒè¡€æ¥æ½®å»å¬äº†ä¸¤ä¸ªè®²åº§ï¼Œä¸€ä¸ªäººæ–‡çš„ï¼Œä¸€ä¸ªæŠ€æœ¯çš„ï¼Œè¿˜éƒ½ç¢°åˆ°äº†ç‚¹æœ‰æ„æ€çš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Infrastructure as Code</title>
      <link>https://blog.monsterxx03.com/2017/04/21/infrastructure-as-code/</link>
      <pubDate>Fri, 21 Apr 2017 16:25:07 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/04/21/infrastructure-as-code/</guid>
      <description>&lt;p&gt;Create virtual resource on AWS is very convenient, but how to manage them will be a problem when your size grow.&lt;/p&gt;

&lt;p&gt;You will come to:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;How to explain the detail online settings for your colleagues (like: how our prod vpc is setup?what&amp;#8217;s the DHCP option set?), navigate around AWS console is okay, but not convenient.&lt;/li&gt;
&lt;li&gt;Who did what to which resource at when? AWS have a service called &lt;code&gt;Config&lt;/code&gt;, can be used to track this change, but if you want to make things as clear as viewing git log, still a lot of works to do.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ideally, we should manage AWS resources like code, all changes kept in VCS, so called &lt;code&gt;Infrastructure as Code&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I&amp;#8217;ve tried three ways to do it:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ansible&lt;/li&gt;
&lt;li&gt;CloudFormation&lt;/li&gt;
&lt;li&gt;terraform&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In this article, I&amp;#8217;ll compare them, however, the conclusion is to use terraform ğŸ™‚&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Concurrency in Go, Reading Notes</title>
      <link>https://blog.monsterxx03.com/2017/04/19/concurrency-in-go-reading-notes/</link>
      <pubDate>Wed, 19 Apr 2017 16:26:58 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/04/19/concurrency-in-go-reading-notes/</guid>
      <description>&lt;p&gt;A few notes taken when reading &lt;Concurrency in Go&gt;&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>MySQL partition table</title>
      <link>https://blog.monsterxx03.com/2017/04/05/mysql-partition-table/</link>
      <pubDate>Wed, 05 Apr 2017 16:23:32 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/04/05/mysql-partition-table/</guid>
      <description>&lt;h1 id=&#34;overview&#34;&gt;Overview&lt;/h1&gt;

&lt;p&gt;MySQL has buildin partition table support, which can help split data accross multi tables,&lt;/p&gt;

&lt;p&gt;and provide a unified query interface as normal tables.&lt;/p&gt;

&lt;p&gt;Benefit:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Easy data management: If we need to archive old data, and our table is partitioned by datetime, we can drop old partition directly.&lt;/li&gt;
&lt;li&gt;Speed up query based on partition key(partitoin pruning)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Limit:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;For partition table, every unique key must use every column in table&amp;#8217;s partition expression(include primary key)&lt;/li&gt;
&lt;li&gt;For innodb engine, paritioned table can&amp;#8217;t have foreign key,and can&amp;#8217;t have columns referenced by foreign keys.&lt;/li&gt;
&lt;li&gt;For MyISAM engine, mysql version &amp;lt;= 5.6.5, DML operation will lock all partition as a whole.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>ElasticSearch cluster</title>
      <link>https://blog.monsterxx03.com/2017/03/22/elasticsearch-cluster/</link>
      <pubDate>Wed, 22 Mar 2017 16:22:32 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/03/22/elasticsearch-cluster/</guid>
      <description>&lt;p&gt;In this article, let&amp;#8217;s talk about ElasticSearch&amp;#8217;s cluster mode, which means multi nodes ElasticSearch.&lt;/p&gt;

&lt;h2 id=&#34;basic-concepts&#34;&gt;Basic concepts&lt;/h2&gt;

&lt;p&gt;cluster: A collection of server nodes with same &lt;code&gt;cluster.name&lt;/code&gt; settings in elasticsearch.yaml&lt;/p&gt;

&lt;p&gt;primary shards: Divide a index into multi parts(by default 5), shards of an index can be distributed over multi nodes. It enables scale index horizontally and make access to index parallelly(accross multi nodes).&lt;/p&gt;

&lt;p&gt;replicas: backup for shards, also replicas can handle search requests, which means you can scale your search capacity horizontally via replicas.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Matrix 14 years later</title>
      <link>https://blog.monsterxx03.com/2017/03/11/matrix-14-years-later/</link>
      <pubDate>Sat, 11 Mar 2017 16:21:31 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2017/03/11/matrix-14-years-later/</guid>
      <description>&lt;p&gt;å¿ƒè¡€æ¥æ½®, åˆçœ‹äº†éé»‘å®¢å¸å›½ä¸‰éƒ¨æ›², å½“å¹´çš„æ²ƒå“æ–¯åŸºå…„å¼Ÿéƒ½å˜æˆæ²ƒå“æ–¯åŸºå§å¦¹äº†, å”å˜˜å•Š&amp;#8230;&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€æ¬¡çœ‹çš„æ—¶å€™, å¥½åƒæ˜¯åˆä¸­å§, è®°å¾—çœ‹ç¬¬ä¸‰éƒ¨è¿˜æ˜¯å§‘çˆ¶çš„ç›—ç‰ˆç¢Ÿä¸Šçœ‹çš„, é‚£å¤©è¿˜æ‹‰äº†ä¸ªåŒå­¦å’Œæˆ‘ä¸€èµ·çœ‹,ç„¶åè¯·ä»–åƒäº†æ³¡é¢+å†°æ·‡æ·‹,ç»“æœä»–å›å®¶å°±æ‹‰è‚šäº†,æŠ±æ€¨äº†æˆ‘å¥½ä¹…,æ‰€ä»¥å°è±¡ç‰¹åˆ«æ·±åˆ»,å“ˆå“ˆ.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Bigtable notes</title>
      <link>https://blog.monsterxx03.com/2016/12/11/bigtable-notes/</link>
      <pubDate>Sun, 11 Dec 2016 16:20:24 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2016/12/11/bigtable-notes/</guid>
      <description>&lt;p&gt;æ‚ä¹±ç¬”è®°ï¼Œè¾…åŠ©è¯»paper.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>GFS notes</title>
      <link>https://blog.monsterxx03.com/2016/11/19/gfs-notes/</link>
      <pubDate>Sat, 19 Nov 2016 16:18:41 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2016/11/19/gfs-notes/</guid>
      <description>&lt;p&gt;çœ‹äº†ä¸‹å¾ˆä¹…å‰ google çš„ GFS è®ºæ–‡ï¼Œ åšç‚¹ç¬”è®°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Migrate to encrypted RDS</title>
      <link>https://blog.monsterxx03.com/2016/10/28/migrate-to-encrypted-rds/</link>
      <pubDate>Fri, 28 Oct 2016 16:17:30 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2016/10/28/migrate-to-encrypted-rds/</guid>
      <description>&lt;p&gt;æœ€è¿‘å…¬å¸åœ¨åš HIPAA Compliance ç›¸å…³çš„äº‹æƒ…ï¼Œå…¶ä¸­è¦æ±‚ä¹‹ä¸€æ˜¯æ‰€æœ‰dbéœ€è¦å¼€å¯encryption.&lt;/p&gt;

&lt;p&gt;æ¯”è¾ƒéº»çƒ¦çš„æ˜¯rds çš„encryption åªèƒ½åœ¨åˆ›å»ºçš„æ—¶å€™è®¾å®šï¼Œæ— æ³•ä¹‹åä¿®æ”¹, æ‰€ä»¥å¿…é¡»å¯¹çº¿ä¸Šçš„db åšä¸€æ¬¡ migration.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>é­”æ³•ä½¿</title>
      <link>https://blog.monsterxx03.com/2016/08/06/witch-night/</link>
      <pubDate>Sat, 06 Aug 2016 16:16:23 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2016/08/06/witch-night/</guid>
      <description>&lt;p&gt;æœ€è¿‘å¿ƒè¡€æ¥æ½®æŠŠ&amp;lt;é­”æ³•ä½¿ä¹‹å¤œ&amp;gt;çš„æ¸¸æˆé€šå…³äº†, éƒ½å·²ç»æ˜¯5å¹´?è¿˜æ˜¯6å¹´å‰å‘å”®çš„äº†, å› ä¸ºå½“å¹´æ±‰åŒ–è¿Ÿè¿Ÿä¸å‘å¸ƒ, å°±ä¸€ç›´æç½®äº†.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>MySQL ç´¢å¼•ä¼˜åŒ–</title>
      <link>https://blog.monsterxx03.com/2016/07/26/mysql-index-optimization/</link>
      <pubDate>Tue, 26 Jul 2016 16:13:54 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2016/07/26/mysql-index-optimization/</guid>
      <description>&lt;p&gt;ä»€ä¹ˆæ˜¯ç´¢å¼•,ç´¢å¼•æ€ä¹ˆå»ºè¿™äº›åŸºæœ¬çš„å°±è·³è¿‡ä¸è°ˆäº†,æ•´ç†ä¸€äº›å‰æ®µæ—¶é—´ä¼˜åŒ–çº¿ä¸Š SQL æŸ¥è¯¢æ—¶ç¢°åˆ°çš„ä¸€äº›é—®é¢˜. ä¸»è¦è§£å†³ä¸‹é¢å‡ ä¸ªé—®é¢˜:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å»ºç«‹ç´¢å¼•æ€æ ·é€‰æ‹©åˆé€‚çš„åˆ—.&lt;/li&gt;
&lt;li&gt;æ€æ ·è®© SQL èƒ½æœ‰æ•ˆåˆ©ç”¨ç´¢å¼•.&lt;/li&gt;
&lt;li&gt;å¦‚æœå¯¹ SQL æ•ˆç‡è¿›è¡Œè¯„ä¼°(å³è®¾ç½®ç´¢å¼•å‰åæ˜¯å¦çœŸçš„æœ‰æ€§èƒ½æå‡).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Redshift as data warehouse</title>
      <link>https://blog.monsterxx03.com/2016/07/16/redshift-as-data-warehouse/</link>
      <pubDate>Sat, 16 Jul 2016 16:11:39 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2016/07/16/redshift-as-data-warehouse/</guid>
      <description>&lt;p&gt;Glow çš„ server infrastructure å…¨éƒ¨æ­å»ºåœ¨ AWS ä¸Šï¼Œä¸€èˆ¬è¦é€‰æ‹©ä¸€äº›åŸºç¡€æœåŠ¡çš„æ—¶å€™ï¼Œæ€»æ˜¯å…ˆçœ‹ AWS, åªè¦åŠŸèƒ½å’Œæˆæœ¬ç¬¦åˆè¦æ±‚ï¼Œä¸ä¼šç‰¹æ„é€‰æ‹©å¼€æºæ–¹æ¡ˆã€‚&lt;/p&gt;

&lt;p&gt;æ•°æ®ä»“åº“æˆ‘ä»¬é€‰æ‹©äº† AWS çš„ Redshift.&lt;/p&gt;

&lt;p&gt;åœ¨ä¸€å¹´å¤šçš„ä½¿ç”¨è¿‡ç¨‹ä¸­ Redshift çš„æ€§èƒ½å’Œç¨³å®šæ€§éƒ½ä¸é”™, å½“ç„¶ä¹Ÿæœ‰ä¸€äº›å‘, è¿™é‡Œæ•´ç†ä¸‹åœ¨ä½¿ç”¨ redshift çš„è¿‡ç¨‹ä¸­çš„ä¸€äº›ç»éªŒå’Œé‡åˆ°çš„å‘.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>MySQL innodb buffer pool</title>
      <link>https://blog.monsterxx03.com/2016/07/16/mysql-innodb-buffer-pool/</link>
      <pubDate>Sat, 16 Jul 2016 16:07:14 +0000</pubDate>
      
      <guid>https://blog.monsterxx03.com/2016/07/16/mysql-innodb-buffer-pool/</guid>
      <description>&lt;p&gt;æœ€è¿‘åœ¨å¯¹å…¬å¸çš„ MySQL æœåŠ¡å™¨åšæ€§èƒ½ä¼˜åŒ–, ä¸€ç›´å¯¹ innodb çš„å†…å­˜ä½¿ç”¨æ–¹å¼ä¸æ˜¯å¾ˆæ¸…æ¥š, ä¹˜è¿™æœºä¼šåšç‚¹æ€»ç»“.&lt;/p&gt;

&lt;p&gt;åœ¨é…ç½® MySQL çš„æ—¶å€™, ä¸€èˆ¬éƒ½ä¼šéœ€è¦è®¾ç½® _innodb_buffer_pool&lt;em&gt;size&lt;/em&gt;, åœ¨å°† MySQL è®¾ç½®åœ¨å•ç‹¬çš„æœåŠ¡å™¨ä¸Šæ—¶, ä¸€èˆ¬ä¼šè®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„80%.&lt;/p&gt;

&lt;p&gt;ä¹‹å‰ä¸€ç›´ç–‘æƒ‘ MySQL æ˜¯æ€ä¹ˆç¼“å­˜æ•°æ®çš„(ä¸æ˜¯æŒ‡query cache), ç›´è§‰åº”è¯¥æ˜¯LRU, ä½†å¦‚æœ query ä¸€ä¸‹ä»ç£ç›˜ä¸Šè¯»å–å¤§é‡çš„æ•°æ®çš„è¯(å…¨è¡¨æ‰«ææˆ–æ˜¯ mysqldump), æ˜¯ä¸æ˜¯å¾ˆå®¹æ˜“å°±ä¼šæŠŠçƒ­æ•°æ®ç»™è¸¢å‡ºå»?&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>About Me</title>
      <link>https://blog.monsterxx03.com/aboutme/</link>
      <pubDate>Fri, 01 Jan 2016 23:49:46 +0800</pubDate>
      
      <guid>https://blog.monsterxx03.com/aboutme/</guid>
      <description>Work with tech, belive in magic, live on fun :)
Daily work:
 Cloud infrastructure: AWS management, config management/monitoring/alerting/performance tuning. Data infrastructure: data warehouse/lake, ETL. Build CI/CD pipeline for fast deployment flow. Chaos is my friend.  I work with python/golang/js/shell, but always think language is the most trival part in life. Be professional, write robust code and useful doc.</description>
    </item>
    
  </channel>
</rss>